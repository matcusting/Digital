<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>å¿ƒç†è¾…å¯¼ç³»ç»Ÿ - ç™»å½•</title>
  <style>
    body {
      font-family: "Microsoft YaHei", sans-serif;
      margin: 0;
      padding: 0;
      height: 100vh; /* å æ»¡å…¨å± */
      display: flex;
      justify-content: center;
      align-items: center;

      /* ğŸŒŠ åŠ¨æ€æ¸å˜èƒŒæ™¯ */
      background: linear-gradient(-45deg, #a18cd1, #fbc2eb, #a6c1ee, #96e6a1);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
    }

    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .login-box {
      width: 320px;
      text-align: center;
      padding: 40px;
      
      /* âœ¨ æ¯›ç»ç’ƒæ•ˆæœ */
      background: rgba(255, 255, 255, 0.75);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-radius: 15px;
      border: 1px solid rgba(255, 255, 255, 0.6);
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
    }

    h2 { color: #4a5568; margin-bottom: 25px; }

    input, select, button {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border: 1px solid #ddd; /* ç¨å¾®åŠ æ·±è¾¹æ¡† */
      border-radius: 8px;
      box-sizing: border-box; /* é˜²æ­¢å®½åº¦æº¢å‡º */
    }

    button {
      background: #2ecc71;
      color: white;
      font-weight: bold;
      border: none;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover { background: #27ae60; }

    a { color: #3498db; text-decoration: none; }
    a:hover { text-decoration: underline; }

    .privacy-text {
      font-size: 12px; 
      color: #666; /* æ·±è‰²ä¸€ç‚¹ä»¥ä¾¿åœ¨ç™½è‰²èƒŒæ™¯çœ‹æ¸… */
      text-align: left; 
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <div class="login-box">
    <h2 id="title">å¿ƒç†è¾…å¯¼ç³»ç»Ÿç™»å½•</h2>

    <select id="lang" onchange="changeLang()">
      <option value="zh">ä¸­æ–‡</option>
      <option value="en">English</option>
      <option value="ms">Bahasa Melayu</option>
    </select>

    <select id="role">
      <option value="student">å­¦ç”Ÿ Student</option>
      <option value="teacher">è€å¸ˆ Teacher</option>
    </select>

    <input type="text" id="username" placeholder="ç”¨æˆ·å / Username">
    <input type="password" id="password" placeholder="å¯†ç  / Password">
    
    <p id="privacyText" class="privacy-text">
      ğŸ”’ æ‚¨çš„æ‰€æœ‰ä¿¡æ¯å‡å­˜å‚¨åœ¨æœ¬åœ°æµè§ˆå™¨ä¸­ã€‚
    </p>

    <button onclick="login()" id="loginBtn">ç™»å½• / Login</button>
    <p id="error" style="color: #e74c3c; font-size: 14px;"></p>
    <p id="registerLink" style="margin-top: 15px; font-size: 14px;">
      è¿˜æ²¡æœ‰å¸å·ï¼Ÿ<a href="register.html" id="registerText">ç‚¹å‡»è¿™é‡Œæ³¨å†Œ</a>
    </p>
  </div>

  <script>
    const text = {
      zh: {
        title: "å¿ƒç†è¾…å¯¼ç³»ç»Ÿç™»å½•", username: "ç”¨æˆ·å / Username", password: "å¯†ç  / Password",
        login: "ç™»å½• / Login", noAccount: "è¿˜æ²¡æœ‰å¸å·ï¼Ÿ", register: "ç‚¹å‡»è¿™é‡Œæ³¨å†Œ",
        privacy: "ğŸ”’ æ‚¨çš„æ‰€æœ‰ä¿¡æ¯å‡å­˜å‚¨åœ¨æœ¬åœ°æµè§ˆå™¨ä¸­ã€‚"
      },
      en: {
        title: "Counseling System Login", username: "Username", password: "Password",
        login: "Login", noAccount: "Don't have an account?", register: "Register here",
        privacy: "ğŸ”’ All your information is stored locally in your browser."
      },
      ms: {
        title: "Log Masuk Sistem Kaunseling", username: "Nama pengguna", password: "Kata laluan",
        login: "Log Masuk", noAccount: "Belum ada akaun?", register: "Daftar di sini",
        privacy: "ğŸ”’ Semua maklumat anda disimpan secara setempat dalam pelayar anda."
      }
    };

    function changeLang() {
      const lang = document.getElementById("lang").value;
      localStorage.setItem("lang", lang);
      const t = text[lang];
      document.getElementById("title").innerText = t.title;
      document.getElementById("username").placeholder = t.username;
      document.getElementById("password").placeholder = t.password;
      document.getElementById("loginBtn").innerText = t.login;
      document.getElementById("registerLink").innerHTML = `${t.noAccount} <a href="register.html" id="registerText">${t.register}</a>`;
      document.getElementById("privacyText").innerText = t.privacy;
    }

    function login() {
      const role = document.getElementById("role").value;
      const user = document.getElementById("username").value.trim();
      const pass = document.getElementById("password").value.trim();
      const error = document.getElementById("error");

      const obfuscatedPassword = btoa(pass);
      const users = JSON.parse(localStorage.getItem("users") || "[]");
      const found = users.find(u => u.username === user && u.password === obfuscatedPassword && u.role === role);

      if (found) {
        localStorage.setItem("loggedInUser", JSON.stringify(found));
        if (role === "student") {
          // *** é“¾æ¥ä¿®æ”¹ï¼šä» index.html æ”¹ä¸º student.html ***
          window.location.href = "student.html";
        } else {
          window.location.href = "teacher.html";
        }
      } else {
        error.innerText = "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ / Incorrect username or password";
      }
    }

    const currentLang = localStorage.getItem("lang") || "zh";
    document.getElementById("lang").value = currentLang;
    changeLang();
  </script>
</body>
</html>
